plugins {
    id 'mule-linter.app-conventions'
}

dependencies {
    implementation project(':mule-linter-core')
    implementation 'info.picocli:picocli-groovy:4.7.4'
}

application {
    mainClass = 'com.avioconsulting.mule.linter.MuleLinterCli'
}

publish.dependsOn(shadowDistTar)
publish.dependsOn(shadowDistZip)

tasks.register('renameDists', Sync) {
    from('build/distributions/')
    into('build/distributions/')
    include '*.tar'
    include '*.zip'
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    rename { String filename ->
        filename.replace("-shadow", "")
    }
}

renameDists.dependsOn(shadowDistTar)
renameDists.dependsOn(shadowDistZip)
publish.dependsOn(renameDists)