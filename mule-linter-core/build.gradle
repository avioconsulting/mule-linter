plugins {
    id 'mule-linter.lib-conventions'
}

dependencies {
    implementation project(':mule-linter-spi')
    implementation 'com.google.code.gson:gson:2.10.1'
    implementation 'org.json:json:20230227'
    implementation 'org.yaml:snakeyaml:2.0'
    implementation 'org.reflections:reflections:0.10.2'
    compileOnly 'org.apache.velocity:velocity-engine-core:2.3'
}

tasks.register('generateGDSL', JavaExec) {
    //Generates GDSL file using `GDSLGenerator.groovy`.
    // Generated file is added in src/main/resources.
    // Run `./gradlew generateGDSL`
    mainClass = 'GDSLGeneratorScript'
    classpath += sourceSets.main.compileClasspath // Needed for Velocity compiletime
    classpath += sourceSets.main.runtimeClasspath
}

jar.dependsOn(generateGDSL)